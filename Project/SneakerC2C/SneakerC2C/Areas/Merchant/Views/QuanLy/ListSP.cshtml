@model IEnumerable<Models.Database.SanPham>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "ListSP";
    Layout = "~/Views/Shared/_MerchantManagementLayout.cshtml";
}


<!-- /quanlysanpham -->
<div class="new_arrivals_agile_w3ls_info menu-qlsp">
    <div class="container">
        <div id="horizontalTab">
            <ul class="resp-tabs-list">
                <a asp-area="Merchant" asp-controller="QuanLy" asp-action="ListSP"><li style="background-color: #fc636b">Tất cả</li></a>
                <a asp-area="Merchant" asp-controller="QuanLy" asp-action="ConHang"><li>còn hàng</li></a>
                <a asp-area="Merchant" asp-controller="QuanLy" asp-action="HetHang"><li>hết hàng</li></a>
                <a asp-area="Merchant" asp-controller="QuanLy" asp-action="KhoaSP"><li>đã bị khoá</li></a>
            </ul>
            <div class="col-md-4 header-middle fix_timkiem_merchant">
                <form action="#" method="post">
                    <input type="search" name="search" placeholder="Tìm kiếm..." required="">
                    <input type="submit" value=" ">
                    <div class="clearfix"></div>
                </form>
            </div>
            <div class="resp-tabs-container">
                <!--/tab_one-->
                <div class="tab1">
                    <div class="col-md-3 product-men margin_merchant">
                        <div class="men-pro-item simpleCart_shelfItem" style="padding:0;">
                            <a href="#" style="text-decoration: none;">
                                <div class="them_sanpham">
                                    <div class="icon_themsp"  data-toggle="modal" data-target="#themModal">
                                        <i class="fa fa-plus-circle" style="font-size:66px;"></i>
                                        <h4>Thêm 1 sản phẩm mới</h4>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    @{
                        int i = 1;
                    }
                    @foreach (var item in Model)
                    {
                        if (i <= 3)
                        {
                            <div class="col-md-3 product-men margin_merchant">
                                <div class="men-pro-item simpleCart_shelfItem">
                                    <div class="men-thumb-item">
                                        <div class="men-thumb-item">
                                            <div class="anhsanpham-3" style="background-image: url(/Hinh/SanPham/@item.Hinh);"></div>
                                        </div>
                                    </div>
                                    <div class="item-info-product ">
                                        <h4><a href="single.html" class="tieude_sanpham">@item.TenSanPham</a></h4>
                                        <div class="info-product-price">
                                            @if (item.GiamGia != null && item.GiamGia != 0)
                                            {
                                                double gia = item.Gia * (100 - item.GiamGia) / 100 ?? 0;
                                                <p><span class="item_price">@gia.ToString("#,###") đ</span> <del>- @item.Gia.Value.ToString("#,###") đ</del></p>
                                            }
                                            else
                                            {
                                                <p><span class="item_price">@item.Gia.Value.ToString("#,###") đ</span></p>
                                            }
                                        </div>
                                        <div class="button-sua-xoa">
                                            <form>
                                                <input type="button" value="Size" class="btnSize" />
                                                <button class="btn btn-danger btnSua" type="button" data-toggle="modal" data-target="#suaModal">Sửa</button>
                                                <input type="submit" value="Xoá" class="button-xoa" />
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            i++;
                        }
                        if (i == 4)
                        {
                            <div class="clearfix"></div>
                        }
                        if (i >= 4)
                        {
                            break;
                        }
                    }
                </div>
                <div class="tab1">
                    @{
                        int j = 1;
                    }
                    @foreach (var item in Model)
                    {
                        if (j < 4)
                        {
                            j++;
                            continue;
                        }
                        if (j >= 4)
                        {
                            <div class="col-md-3 product-men margin_merchant">
                                <div class="men-pro-item simpleCart_shelfItem">
                                    <div class="men-thumb-item">
                                        <div class="men-thumb-item">
                                            <div class="anhsanpham-3" style="background-image: url(/Hinh/SanPham/@item.Hinh);"></div>
                                        </div>
                                    </div>
                                    <div class="item-info-product ">
                                        <h4><a href="single.html" class="tieude_sanpham">@item.TenSanPham</a></h4>
                                        <div class="info-product-price">
                                            @if (item.GiamGia != null && item.GiamGia != 0)
                                            {
                                                double gia = item.Gia * (100 - item.GiamGia) / 100 ?? 0;
                                                <p><span class="item_price">@gia.ToString("#,###") đ</span> <del>- @item.Gia.Value.ToString("#,###") đ</del></p>
                                            }
                                            else
                                            {
                                                <p><span class="item_price">@item.Gia.Value.ToString("#,###") đ</span></p>
                                            }
                                        </div>
                                        <div class="button-sua-xoa">
                                            <form>
                                                <input type="button" value="Size" class="btnSize" />
                                                <input type="button" value="Sửa" class="button-sua" onclick="location.href='#'" />
                                                <input type="submit" value="Xoá" class="button-xoa" />
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            j++;
                            if (j % 4 == 0)
                            {
                                <div class="clearfix"></div>
                            }
                        }
                    }
                </div>
                <!--//tab_one-->
                <!--phân trang-->
                <ul class="phantrang modal-1" style="padding-top: 1.5em;">
                    <li><a href="#" class="prev">&laquo</a></li>
                    <li><a href="#" class="active">1</a></li>
                    <li> <a href="#">2</a></li>
                    <li> <a href="#">3</a></li>
                    <li> <a href="#">4</a></li>
                    <li> <a href="#">5</a></li>
                    <li> <a href="#">6</a></li>
                    <li> <a href="#">7</a></li>
                    <li> <a href="#">8</a></li>
                    <li> <a href="#">9</a></li>
                    <li><a href="#" class="next">&raquo;</a></li>
                </ul>
                <!--hết phân trang-->
            </div>
        </div>
    </div>
</div>
<!-- //quanlysanpham -->
<!--modal them sp-->
<div class="modal fade" id="themModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <form asp-controller="QuanLy" asp-action="ThemSP" enctype="multipart/form-data" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Sản phẩm</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Mã sản phẩm</label>
                        <input type="text" class="form-control" id="item-them-ma" name="item_them_ma" required>
                    </div>
                    <div class="form-group">
                        <label>Tên sản phẩm</label>
                        <input type="text" class="form-control" id="item-them-tensp" name="item_them_tensp" required>
                    </div>
                    <div class="form-group">
                        <label>Màu</label>
                        <input type="text" class="form-control" id="item-them-mau" name="item_them_mau">
                    </div>
                    <div class="form-group">
                        <label>Hãng sản phẩm</label>
                        <select class="form-control" id="item-them-hang" name="item_them_hang">
                            @foreach (var item in ViewBag.HangSanPham)
                            {
                                <option value="@item.Id">@item.TenHang</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Phân loại</label>
                        <select class="form-control" id="item-them-phanloai" name="item_them_phanloai">
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Giá</label>
                        <input type="text" class="form-control" id="item-them-gia" name="item_them_gia">
                    </div>
                    <div class="form-group">
                        <label>Hinh</label>
                        <input type="file" class="form-control" id="item-them-hinh" name="item_them_hinh" multiple>
                    </div>
                    <div class="form-group">
                        <label>Chi tiết</label>
                        <input type="text" class="form-control" id="item-them-chitiet" name="item_them_chitiet">
                    </div>
                    <div class="form-group">
                        <label>Giảm giá</label>
                        <input type="text" class="form-control" id="item-them-giamgia" name="item_them_giamgia">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-warning" id="btnThem">Thêm</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Đóng</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal fade" id="suaModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <form asp-controller="QuanLy" asp-action="SuaSP" enctype="multipart/form-data" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Sản phẩm</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Tên sản phẩm</label>
                        <input type="text" class="form-control" id="item-sua-tensp" name="item_sua_tensp" required>
                    </div>
                    <div class="form-group">
                        <label>Màu</label>
                        <input type="text" class="form-control" id="item-sua-mau" name="item_sua_mau">
                    </div>
                    <div class="form-group">
                        <label>Hãng sản phẩm</label>
                        <select class="form-control" id="item-sua-hang" name="item_sua_hang">
                            @foreach (var item in ViewBag.HangSanPham)
                            {
                                <option value="@item.Id">@item.TenHang</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Phân loại</label>
                        <select class="form-control" id="item-sua-phanloai" name="item_sua_phanloai">
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Giá</label>
                        <input type="text" class="form-control" id="item-sua-gia" name="item_sua_gia">
                    </div>
                    <div class="form-group">
                        <label>Hinh</label>
                        <input type="file" class="form-control" id="item-sua-hinh" name="item_sua_hinh" multiple>
                    </div>
                    <div class="form-group">
                        <label>Chi tiết</label>
                        <input type="text" class="form-control" id="item-sua-chitiet" name="item_sua_chitiet">
                    </div>
                    <div class="form-group">
                        <label>Giảm giá</label>
                        <input type="text" class="form-control" id="item-sua-giamgia" name="item_sua_giamgia">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-warning" id="btnThem">Sửa</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Đóng</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
    $(document).ready(function () {
        $(".men-thumb-item").click(function () {

        });
    });
</script>
@*<script>
    $(document).ready(function () {
        $(".SuaSp").click(function () {
            let pricetext = $(this).closest('.cart_theoshop_item').find('.tieude_sanpham').text().trim();
            let pTen = $(this).closest('.tab1').find('.tensp').text();
            let pTenShop = $(this).closest('tr').find('.tenshop').text();
            let pMau = $(this).closest('tr').find('.mau').text();
            let pHang = $(this).closest('tr').find('.tenhang').text();
            let pGia = $(this).closest('tr').find('.item_price').text();
            let pHinh = $(this).closest('tr').find('.img-hinh').attr('src');
            let pChiTiet = $(this).closest('tr').find('.chitiet').text();
            let pGiamGia = $(this).closest('tr').find('.giamgia').text();
            //alert(pGiamGia);
            $("#masp-sua").val(Id.trim());
            $("#tensp-sua").val(pTen.trim());
            $("#tenshop-sua").val(pTenShop.trim());
            $("#mau-sua").val(pMau.trim());
            $("#gia-sua").val(pGia.trim());
            $("#hinh-sua").val(pHinh.trim());
            $("#chitiet-sua").val(pChiTiet.trim());
            $("#giamgia-sua").val(pGiamGia.trim());

            let pPhanLoai = $(this).closest('tr').find('.phanloai').text();
            if (pPhanLoai != '') {
                $("#phanloai-sua option").each(function () {
                    if ($(this).text().includes(pPhanLoai)) {
                        $(this).attr('selected', 'selected');
                        //return;
                    }
                    else {
                        $(this).attr('selected', false);
                    }
                });
            }

            let hang = $(this).closest('tr').find('.tenhang').text();
            if (hang != '') {
                $("#hang-sua option").each(function () {
                    if ($(this).text().includes(hang)) {
                        $(this).attr('selected', 'selected');
                        //return;
                    }
                    else {
                        $(this).attr('selected', false);
                    }
                });
            }

        });

    });
</script>*@