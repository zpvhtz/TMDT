@model IEnumerable<Models.Database.SanPham>

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="row">
    <div class="col-lg-12">
        <h2 class="page-header">DANH SÁCH SẢN PHẨM</h2>
    </div>
    <!-- /.col-lg-12 -->
</div>
<div class="panel panel-default">
    <div class="panel-body">
        <!-- Search form -->
        <div class="row">
            <div class="col-lg-1">
                <button class="btn btn-primary" data-toggle="modal" data-target="#Them">Thêm</button>
            </div>
            <div class="col-lg-2">
                <div class="form-group">
                    <select class="form-control" id="sortList" onchange="window.location.href = SearchAndSort()">
                        <option selected disabled>Sắp xếp theo</option>
                        <option value=""></option>
                        <option value=""></option>
                        <option value=""></option>
                    </select>
                </div>
            </div>
            <div class="col-lg-6"></div>
            <div class="col-lg-3">
                <form asp-controller="SanPham" asp-action="Search" method="get">
                    <div class="input-group custom-search-form">
                        <input type="text" class="form-control" id="searchList" placeholder="Tìm kiếm..." name="search">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>

                    </div>
                </form>
            </div>
        </div>
        <!--Table-->
        <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
            <thead class="thead-dark">
                <tr class="odd gradeX">
                    <td>Mã sản phẩm</td>
                    <td>Tên sản phẩm</td>
                    <td>Tên shop</td>
                    <td>Màu</td>
                    <td>Hãng</td>
                    <td>Phân loại</td>
                    <td>Giá</td>
                    <td>Hình</td>
                    <td>Chi tiết</td>
                    <td>Giảm giá</td>
                    <td></td>
                </tr>
            </thead>
            <tbody class="body-content">
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="ma">@item.MaSanPham</td>
                        <td class="tensp">@item.TenSanPham</td>
                        <td class="tenshop">@item.IdTaiKhoanNavigation.TenShop</td>
                        <td class="mau">@item.Mau</td>
                        <td class="tenhang">@item.IdHangSanPhamNavigation.TenHang</td>
                        <td class="phanloai">@item.PhanLoai</td>
                        <td class="fa-github-alt">@item.Gia.Value.ToString("# VND")</td>
                        <td>
                            <img src="~/Hinh/SanPham/@item.Hinh" style="width:100px; height:100px;" />
                        </td>
                        <td class="chitiet">@item.ChiTiet</td>
                        <td class="giamgia">@item.GiamGia.Value.ToString("# %")</td>
                        <td>
                            <button class="btn btn-danger" type="button" data-toggle="modal" data-target="#Sua" id="SuaSp">Sửa</button>
                            <button class="btn btn-danger" type="button" data-toggle="modal" data-target="#Khoa">Khoá</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<!-- /.panel-body -->

<!--Modal sua-->
<div class="modal fade" id="Sua" role="dialog">
    <div class="modal-dialog">
        <form asp-controller="SanPham" asp-action="EditSP" method="post">

        </form>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#SuaSp").Click(function () {
            let Id = $(this).closest('tr').find('.ma').text();
            let Ten = $(this).closest('tr').find('.ten').text();
            let TenShop = $(this).closest('tr').find('.tenshop').val();
            let Mau = $(this).closest('tr').find('.ma').text();
            let Hang = $(this).closest('tr').find('.tenhang').val();
            let PhanLoai = $(this).closest('tr').find('.phanloai').val();
            let Gia = $(this).closest('tr').find('.gia').text();
            let Hinh = $(this).closest('tr').find('.hinh').text();
            let ChiTiet = $(this).closest('tr').find('.chitiet').text();
            let GiamGia = $(this).closest('tr').find('.giamgia').text();

        });
        
    });
</script>


